<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width= , initial-scale=1.0" />
    <title>비밀번호 수정</title>
    <!-- 폰트어썸 -->

    <script
      src="https://kit.fontawesome.com/247e9f18da.js"
      crossorigin="anonymous"
    ></script>
    <!-- 부트스트랩 -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://webfontworld.github.io/SCoreDream/SCoreDream.css"
      rel="stylesheet"
    />

    <link rel="icon" href="./image/logo.svg" />
    <style>
      * {
        font-family: "SCoreDream";
      }
      a {
        color: #000;
        text-decoration: none;
      }
      .aBtn {
        margin-top: 10px;
        margin-left: 10px;
        text-align: center;
        display: inline-block;
      }
      .aBtn i {
        font-size: 30px;
      }
      .aBtn p {
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <div class="aBtn">
      <a href="showLikeList.html">
        <i class="fa-solid fa-circle-left"></i>
        <p>뒤로가기</p>
      </a>
    </div>

    <div
      style="
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-items: center;
        margin-top: 100px;
      "
    >
      <h1 style="font-size: 35px; margin: 0 0 40px">비밀번호 수정</h1>
      <form style="width: 95%; max-width: 500px">
        <div class="form-floating mb-3" style="width: 100%">
          <input
            type="password"
            class="form-control"
            id="floatingInput"
            placeholder="Password"
          />
          <label for="floatingInput">비밀번호</label>
        </div>
        <div class="form-floating" style="width: 100%">
          <input
            type="password"
            class="form-control"
            id="floatingPassword"
            placeholder="Password Check"
          />
          <label for="floatingPassword">비밀번호 확인</label>
        </div>
        <div
          class="d-grid gap-2 col-6 mx-auto"
          style="width: 100%; margin-top: 40px"
        >
          <button class="btn btn-danger" id="submitButton" type="submit">
            제출하기
          </button>
        </div>
      </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
      $(document).ready(function() {
        $("#submitButton").on("click", function() {
          const password = $("#floatingInput").val();
          const confirmPassword = $("#floatingPassword").val();
          const username = sessionStorage.getItem("username");
  
          if (password !== confirmPassword) {
            alert("비밀번호가 일치하지 않습니다.");
            return;
          }
  
          $.ajax({
            url: "http://dongseong.dothome.co.kr/passwordEdit.php",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({
              username: username,
              password: password,
              confirmPassword: confirmPassword
            }),
            success: function(response) {
              if (response.success) {
                alert("비밀번호가 성공적으로 수정되었습니다.");
              } else {
                alert("비밀번호 수정 실패: " + response.message);
              }
            },
            error: function(xhr, status, error) {
              alert("비밀번호 수정 요청에 실패했습니다.");
              console.error(error);
            }
          });
        });
      });
    </script>
  </body>
</html>
